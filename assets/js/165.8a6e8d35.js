(window.webpackJsonp=window.webpackJsonp||[]).push([[165],{496:function(a,s,t){"use strict";t.r(s);var e=t(0),r=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"mongodb数据备份"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mongodb数据备份"}},[a._v("#")]),a._v(" MongoDB数据备份")]),a._v(" "),s("p",[a._v("在"),s("code",[a._v("Mongodb")]),a._v("中我们使用"),s("code",[a._v("mongodump")]),a._v("命令来备份"),s("code",[a._v("MongoDB")]),a._v("数据。该命令可以导出所有数据到指定目录中。")]),a._v(" "),s("p",[s("code",[a._v("mongodump")]),a._v("命令可以通过参数指定导出的数据量级转存的服务器。")]),a._v(" "),s("h3",{attrs:{id:"语法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[a._v("#")]),a._v(" 语法")]),a._v(" "),s("p",[s("code",[a._v("mongodump")]),a._v("命令脚本语法如下：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("mongodump "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-h")]),a._v(" dbhost "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" dbname "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" dbdirectory\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("-h：\nMongoDB 所在服务器地址，例如：127.0.0.1，当然也可以指定端口号：127.0.0.1:27017\n\n-d：\n需要备份的数据库实例，例如：test\n\n-o：\n备份的数据存放位置，例如：c:\\data\\dump，当然该目录需要提前建立，在备份完成后，系统自动在dump目录下建立一个test目录，这个目录里面存放该数据库实例的备份数据。\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br")])]),s("h3",{attrs:{id:"实例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实例"}},[a._v("#")]),a._v(" 实例")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("mongodump "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-h")]),a._v(" IP "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--port")]),a._v(" 端口 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-u")]),a._v(" 用户名 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" 密码 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" 数据库 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" 文件存在路径\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("执行以上命令后，客户端会连接到ip为 "),s("code",[a._v("127.0.0.1")]),a._v(" 端口号为 "),s("code",[a._v("27017")]),a._v(" 的"),s("code",[a._v("MongoDB")]),a._v("服务上，并备份所有数据到 "),s("code",[a._v("bin/dump/")]),a._v(" 目录中。")]),a._v(" "),s("p",[s("code",[a._v("mongodump")]),a._v(" 命令可选参数列表如下所示：")]),a._v(" "),s("table",[s("thead",[s("tr",[s("th",[a._v("语法")]),a._v(" "),s("th",[a._v("描述")]),a._v(" "),s("th",[a._v("实例")])])]),a._v(" "),s("tbody",[s("tr",[s("td",[a._v("mongodump --host HOST_NAME --port PORT_NUMBER")]),a._v(" "),s("td",[a._v("该命令将备份所有"),s("code",[a._v("MongoDB")]),a._v("数据")]),a._v(" "),s("td",[a._v("mongodump --host runoob.com --port 27017")])]),a._v(" "),s("tr",[s("td",[a._v("mongodump --dbpath DB_PATH --out BACKUP_DIRECTORY")]),a._v(" "),s("td"),a._v(" "),s("td",[a._v("mongodump --dbpath /data/db/ --out /data/backup/")])]),a._v(" "),s("tr",[s("td",[a._v("mongodump --collection COLLECTION --db DB_NAME")]),a._v(" "),s("td",[a._v("该命令将备份指定数据库的集合。")]),a._v(" "),s("td",[a._v("mongodump --collection mycol --db test")])])])]),a._v(" "),s("h2",{attrs:{id:"mongodb数据恢复"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mongodb数据恢复"}},[a._v("#")]),a._v(" MongoDB数据恢复")]),a._v(" "),s("p",[s("code",[a._v("mongodb")]),a._v("使用 "),s("code",[a._v("mongorestore")]),a._v(" 命令来恢复备份的数据。")]),a._v(" "),s("h3",{attrs:{id:"语法-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#语法-2"}},[a._v("#")]),a._v(" 语法")]),a._v(" "),s("p",[s("code",[a._v("mongorestore")]),a._v("命令脚本语法如下：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("mongorestore "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-h")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("hostname"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v(":port"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" dbname "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("path"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("--host <:port>, -h <:port>：\nMongoDB所在服务器地址，默认为： localhost:27017\n\n--db , -d ：\n需要恢复的数据库实例，例如：test，当然这个名称也可以和备份时候的不一样，比如test2\n\n--drop：\n恢复的时候，先删除当前数据，然后恢复备份的数据。就是说，恢复后，备份后添加修改的数据都会被删除，慎用哦！\n\n<path>：\nmongorestore 最后的一个参数，设置备份数据所在位置，例如：c:\\data\\dump\\test。\n\n你不能同时指定 <path> 和 --dir 选项，--dir也可以设置备份目录。\n\n--dir：\n指定备份的目录\n你不能同时指定 <path> 和 --dir 选项。\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br"),s("span",{staticClass:"line-number"},[a._v("15")]),s("br"),s("span",{staticClass:"line-number"},[a._v("16")]),s("br"),s("span",{staticClass:"line-number"},[a._v("17")]),s("br")])]),s("h2",{attrs:{id:"实例-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实例-2"}},[a._v("#")]),a._v(" 实例")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("mongorestore "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-h")]),a._v(" IP "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--port")]),a._v(" 端口 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-u")]),a._v(" 用户名 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" 密码 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" 数据库 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--drop")]),a._v(" 文件存在路径\n\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])])])}),[],!1,null,null,null);s.default=r.exports}}]);