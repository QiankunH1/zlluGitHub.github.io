(window.webpackJsonp=window.webpackJsonp||[]).push([[122],{455:function(s,a,t){"use strict";t.r(a);var n=t(0),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[a("code",[s._v("node.js")]),s._v("开发中使用"),a("code",[s._v("Node Supervisor")]),s._v("实现监测文件修改并自动重启应用的功能，严重影响开发效率，因为"),a("code",[s._v("Node.js")]),s._v("只有在第一次引用到某部份时才会去解析脚本文件，以后都会直接访问内存，避免重复载入，提高性能。")]),s._v(" "),a("h2",{attrs:{id:"安装-supervisor"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-supervisor"}},[s._v("#")]),s._v(" 安装 supervisor")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-g")]),s._v(" supervisor\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("这里需要特别说明的是，-g 意味着安装到全局，所以Linux和Mac系统在安装时，要加 sudo：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-g")]),s._v(" supervisor\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"基本使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本使用"}},[s._v("#")]),s._v(" 基本使用")]),s._v(" "),a("p",[s._v("最常用、最快捷的方式，就是直接进入你的网站根目录，执行：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("supervisor myapp\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("举个例子，Express4.0中，启动文件位于 ./bin/www 中，则我们启动时，必须在 ./ 中执行：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("supervisor bin/www\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("而不能进入 bin 目录执行： supervisor www。这样虽然有可能也能启动，但这么做相当于把 bin 目录当作了服务的根目录了，一旦有涉及到文件目录的操作，一定会出错的。")]),s._v(" "),a("h2",{attrs:{id:"更多使用方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更多使用方法"}},[s._v("#")]),s._v(" 更多使用方法")]),s._v(" "),a("p",[s._v("在命令行中直接执行：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("supervisor \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("会得到它的详细使用方法：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("Node Supervisor is used to restart programs when they crash.\nIt can also be used to restart programs when a *.js "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" changes.\n\nUsage:\n  supervisor "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("program"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  supervisor "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" -- "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("program"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("args "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\nRequired:\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("program"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    The program to run.\n\nOptions:\n  -w"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("--watch "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("watchItems"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    A comma-delimited list of folders or js files to "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("watch")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" changes.\n    When a change to a js "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" occurs, reload the program\n    Default is "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'.'")]),s._v("\n\n  -i"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("--ignore "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("ignoreItems"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    A comma-delimited list of folders to ignore "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" changes.\n    No default\n\n  --ignore-symlinks\n    Enable symbolic links ignoring when looking "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" files to watch.\n\n  -p"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("--poll-interval "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("milliseconds"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    How often to poll watched files "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" changes.\n    Defaults to Node default.\n\n  -e"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("--extensions "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("extensions"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    Specific "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" extensions to "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("watch")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" addition to defaults.\n    Used when "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--watch")]),s._v(" option includes folders\n    Default is "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'node,js'")]),s._v("\n\n  -x"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("--exec "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("executable"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    The executable that runs the specified program.\n    Default is "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'node'")]),s._v("\n\n  --debug"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("port"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    Start "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" with "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--debug")]),s._v(" flag.\n\n  --debug-brk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("port"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    Start "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" with --debug-brk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("port"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" flag.\n\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--harmony")]),s._v("\n    Start "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" with "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--harmony")]),s._v(" flag.\n\n  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--harmony_default_parameters")]),s._v("\n    Start "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" with "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--harmony_default_parameters")]),s._v(" flag.\n\n  -n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("--no-restart-on error"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n    Don"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'t automatically restart the supervised program if it ends.\n    Supervisor will wait for a change in the source files.\n    If "error", an exit code of 0 will still restart.\n    If "exit", no restart regardless of exit code.\n    If "success", no restart only if exit code is 0.\n    \n  -t|--non-interactive\n    Disable interactive capacity.\n    With this option, supervisor won\'')]),s._v("t listen to stdin.\n\n  -k"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("--instant-kill\n    use SIGKILL "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("-9"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" to terminate child instead of the "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" gentle SIGTERM.\n\n  --force-watch\n    Use fs.watch instead of fs.watchFile.\n    This may be useful "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" you see a high cpu load on a windows machine.\n\n  -h"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("--help"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("-?\n    Display these usage instructions.\n\n  -q"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("--quiet\n    Suppress DEBUG messages\n\n  -V"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("--verbose\n    Show extra DEBUG messages\n\nOptions available after start:\nrs - restart process.\n     Useful "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" restarting supervisor eaven "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" no "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" has changed.\n\nExamples:\n  supervisor myapp.js\n  supervisor myapp.coffee\n  supervisor "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v(" scripts "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" myext "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-x")]),s._v(" myrunner myapp\n  supervisor -- server.js "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-h")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" port\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br")])]),a("p",[s._v("如果想不监控某一些文件夹，可以使用 -i 参数。如：我们要忽略根目录下的 private 文件夹，可以这样启动：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("supervisor "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" ./private myapp\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("如果要忽略多个文件夹，则用英文的逗号,分隔：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("supervisor "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" ./private,./otherdir myapp\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);